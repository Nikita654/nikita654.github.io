(function(e){function t(t){for(var n,c,s=t[0],u=t[1],i=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var u=r[s];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1d50":function(e,t,r){},"2a4a":function(e,t,r){"use strict";r("8bf5")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=r("b640"),o=r.n(a),c=Object(n["createVNode"])("img",{class:"logo",alt:"Vue logo",src:o.a},null,-1);function s(e,t,r,a,o,s){var u=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[c,Object(n["createVNode"])(u)],64)}var u={name:"App"};r("ebac");u.render=s;var i=u,l=r("bc3a"),d=r.n(l),p=r("2106"),h=r.n(p),b=r("6c02"),f=(r("b0c0"),{class:"hello"}),m=Object(n["createVNode"])("h1",null,"Система работы с текстом",-1),g=Object(n["createVNode"])("h3",null,"Почта пользователя",-1),j={class:"group"},O=Object(n["createVNode"])("span",{class:"highlight"},null,-1),v=Object(n["createVNode"])("span",{class:"bar"},null,-1),k=Object(n["createVNode"])("label",null,"Почта",-1),x=Object(n["createVNode"])("h3",null,"Пароль пользователя",-1),w={class:"group"},N=Object(n["createVNode"])("span",{class:"highlight"},null,-1),V=Object(n["createVNode"])("span",{class:"bar"},null,-1),y=Object(n["createVNode"])("label",null,"Пароль",-1),_=Object(n["createVNode"])("h3",null,"Еще не зарегистрированы?",-1),T=Object(n["createVNode"])("button",{class:"btn_reg"}," Зарегистрироваться ",-1);function R(e,t,r,a,o,c){var s=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createBlock"])("div",f,[m,g,Object(n["createVNode"])("div",j,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.name=e}),type:"text",required:""},null,512),[[n["vModelText"],o.name]]),O,v,k]),x,Object(n["createVNode"])("div",w,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.password=e}),type:"password",required:""},null,512),[[n["vModelText"],o.password]]),N,V,y]),Object(n["createVNode"])("button",{onClick:t[3]||(t[3]=function(e){return c.login(o.name,o.password)})}," Войти "),_,Object(n["createVNode"])(s,{to:"/signup"},{default:Object(n["withCtx"])((function(){return[T]})),_:1})])}var $=r("1da1"),U=(r("96cf"),r("5530")),I=r("d4ec"),S=r("bee2"),B=(r("d3b7"),function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(I["a"])(this,e),this.client=r.client||d.a.create(),this.token=r.token,this.refreshToken=r.refreshToken,this.refreshRequest=null,this.client.interceptors.request.use((function(e){if(!t.token)return e;var r=Object(U["a"])({headers:{}},e);return r.headers.Authorization="Bearer ".concat(t.token),r}),(function(e){return Promise.reject(e)})),this.client.interceptors.response.use((function(e){return e}),function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.refreshToken&&401===r.response.status&&!r.config.retry){e.next=2;break}throw r;case 2:return t.refreshRequest||(t.refreshRequest=t.client.post("http://localhost:3000/auth/refresh",{refreshToken:t.refreshToken})),e.next=5,t.refreshRequest;case 5:return n=e.sent,a=n.data,t.token=a.token,t.refreshToken=a.refreshToken,localStorage.setItem("token",a.token),localStorage.setItem("Rtoken",a.refreshToken),o=Object(U["a"])(Object(U["a"])({},r.config),{},{retry:!0}),e.abrupt("return",t.client(o));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return Object(S["a"])(e,[{key:"login",value:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.name,n=t.password,a=r,e.prev=2,e.next=5,this.client.post("https://dd20-91-244-168-17.ngrok.io/api/User/login",{email:a,password:n});case 5:return o=e.sent,c=o.data,localStorage.setItem("token",c.token),localStorage.setItem("Rtoken",c.refreshToken),this.token=c.token,this.refreshToken=c.refreshToken,e.abrupt("return",c);case 14:return e.prev=14,e.t0=e["catch"](2),e.abrupt("return",{msg:"Error"});case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"textGet",value:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=new FormData,r.append("file",t),e.next=5,this.client.put("https://dd20-91-244-168-17.ngrok.io/api/Classify/load",r);case 5:return n=e.sent,a=n.data,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{msg:"Error"});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"status",value:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.get("https://dd20-91-244-168-17.ngrok.io/api/Classify/status?guid=".concat(t));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return",{msg:"Error"});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){this.token=null,this.refreshToken=null,localStorage.setItem("token",""),localStorage.setItem("Rtoken","")}},{key:"signup",value:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o,c,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.name,n=t.password,a=t.email,o=t.userN,c=r,e.prev=2,e.next=5,this.client.post("https://dd20-91-244-168-17.ngrok.io/api/User/registration",{displayName:c,password:n,email:a,userName:o});case 5:return s=e.sent,u=s.data,console.log(u),localStorage.setItem("token",u.token),localStorage.setItem("Rtoken",u.refreshToken),this.token=u.token,this.refreshToken=u.refreshToken,e.abrupt("return",u);case 15:return e.prev=15,e.t0=e["catch"](2),e.abrupt("return",{msg:"Сущесвует"});case 18:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),E=new B,q=E,M={name:"login",data:function(){return{qr_code:"",name:"",password:"",url:"",ex:!0}},computed:{auth:function(){return this.$store.getters.get_auth},curname:function(){return this.$store.getters.get_name},code:function(){return this.$store.getters.get_code}},watch:{auth:function(e){e&&this.ex&&(this.$store.commit("change_name",this.curname),this.$store.commit("change_code",this.code),this.$toast.success("Вы уже вошли в систему, прежде чем войти, выйдите из текущего пользователя"),_e.push("home"))}},methods:{login:function(e,t){var r=this;return Object($["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,q.login({name:e,password:t});case 2:a=n.sent,a.displayName?(r.$store.commit("change_auth",!0),r.$toast.success("Поздравляем, вы успешно вошли в систему под своим именем и паролем."),_e.push("home")):r.$toast.error("К сожалению, пароль или имя пользователя не являются правильными, попробуйте снова.");case 4:case"end":return n.stop()}}),n)})))()}}};r("2a4a");M.render=R;var C=M,D=Object(n["withScopeId"])("data-v-d9a732a6");Object(n["pushScopeId"])("data-v-d9a732a6");var P={class:"hello"},F=Object(n["createVNode"])("h1",null,"Регистрация ",-1),A=Object(n["createVNode"])("h3",null,"Логин пользователя",-1),G={class:"group"},J=Object(n["createVNode"])("span",{class:"highlight"},null,-1),z=Object(n["createVNode"])("span",{class:"bar"},null,-1),L=Object(n["createVNode"])("label",null,"Логин",-1),H=Object(n["createVNode"])("h3",null,"Имя пользователя",-1),K={class:"group"},Q=Object(n["createVNode"])("span",{class:"highlight"},null,-1),W=Object(n["createVNode"])("span",{class:"bar"},null,-1),X=Object(n["createVNode"])("label",null,"Имя",-1),Y=Object(n["createVNode"])("h3",null,"Email пользователя",-1),Z={class:"group"},ee=Object(n["createVNode"])("span",{class:"highlight"},null,-1),te=Object(n["createVNode"])("span",{class:"bar"},null,-1),re=Object(n["createVNode"])("label",null,"Почта",-1),ne=Object(n["createVNode"])("h3",null,"Пароль пользователя",-1),ae={class:"group"},oe=Object(n["createVNode"])("span",{class:"highlight"},null,-1),ce=Object(n["createVNode"])("span",{class:"bar"},null,-1),se=Object(n["createVNode"])("label",null,"Пароль",-1),ue=Object(n["createVNode"])("h3",null,"Уже зарегистрированы?",-1),ie=Object(n["createVNode"])("button",null," Войти ",-1);Object(n["popScopeId"])();var le=D((function(e,t,r,a,o,c){var s=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createBlock"])("div",P,[F,A,Object(n["createVNode"])("div",G,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.name=e}),type:"text",required:""},null,512),[[n["vModelText"],o.name]]),J,z,L]),H,Object(n["createVNode"])("div",K,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.userN=e}),type:"text",required:""},null,512),[[n["vModelText"],o.userN]]),Q,W,X]),Y,Object(n["createVNode"])("div",Z,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.email=e}),type:"text",inputmode:"email",required:""},null,512),[[n["vModelText"],o.email]]),ee,te,re]),ne,Object(n["createVNode"])("div",ae,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.password=e}),type:"password",required:""},null,512),[[n["vModelText"],o.password]]),oe,ce,se]),Object(n["createVNode"])("button",{class:"btn_reg",onClick:t[5]||(t[5]=function(e){return c.signup(o.name,o.password,o.email,o.userN)})}," Отправить "),ue,Object(n["createVNode"])(s,{to:"/"},{default:D((function(){return[ie]})),_:1})])})),de={name:"signup",data:function(){return{name:"",password:"",email:"",userN:""}},computed:{auth:function(){return this.$store.getters.get_auth},curname:function(){return this.$store.getters.get_name},code:function(){return this.$store.getters.get_code}},watch:{auth:function(e){e&&(this.$store.commit("change_name",this.curname),this.$store.commit("change_code",this.code),this.$toast.success("Вы уже вошли в систему, прежде чем войти, выйдите из текущего пользователя"),_e.push("home"))}},methods:{signup:function(e,t,r,n){var a=this;return Object($["a"])(regeneratorRuntime.mark((function o(){var c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!(t.length<6)){o.next=4;break}a.$toast.error("Пароль должен быть не менее 6 символов"),o.next=8;break;case 4:return o.next=6,q.signup({name:e,password:t,email:r,userN:n});case 6:c=o.sent,c.token?(a.$toast.success("Поздравляем, вы успешно зарегистрировались,осталось только войти в систему под своим именем и паролем."),_e.push("/")):a.$toast.error("Попробуйте снова, кажется вы уже зарегистрированы или такой пользователь существует");case 8:case"end":return o.stop()}}),o)})))()}}};de.render=le,de.__scopeId="data-v-d9a732a6";var pe=de,he=Object(n["withScopeId"])("data-v-67143cac");Object(n["pushScopeId"])("data-v-67143cac");var be={key:0,class:"hello"},fe=Object(n["createVNode"])("h1",null,"Ваш личный кабинет для тестирования",-1),me=Object(n["createVNode"])("h3",null,"Добро пожаловать в ваш кабинет, здесь вы можете протестировать наше приложение ",-1),ge=Object(n["createVNode"])("h3",null,"Отправить текст для тестирования конспекта и тематики текста ",-1),je=Object(n["createVNode"])("h3",null,"Конспект текста:",-1),Oe=Object(n["createVNode"])("h3",null,"Хотите выйти?",-1),ve={key:1},ke=Object(n["createVNode"])("button",null," Войти в систему ",-1);Object(n["popScopeId"])();var xe=he((function(e,t,r,a,o,c){var s=Object(n["resolveComponent"])("router-link");return c.auth?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ve,[Object(n["createVNode"])(s,{to:"/"},{default:he((function(){return[ke]})),_:1})])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",be,[fe,me,Object(n["createVNode"])("button",{disabled:!o.statusU,onclick:"document.getElementById('up').click()"},Object(n["toDisplayString"])(o.buttonUpload),9,["disabled"]),Object(n["createVNode"])("input",{style:{display:"none"},id:"up",accept:".ogg, .opus",type:"file",onChange:t[1]||(t[1]=function(e){return c.submitFile()})},null,32),ge,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{disabled:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.textEx=e}),name:"",id:"",cols:"30",rows:"10"},null,512),[[n["vModelText"],o.textEx]]),Object(n["createVNode"])("h3",null,"Тематика текста:"+Object(n["toDisplayString"])(o.typeText),1),je,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{disabled:"","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.sumText=e}),name:"",id:"",cols:"30",rows:"10"},null,512),[[n["vModelText"],o.sumText]]),Oe,Object(n["createVNode"])("button",{onClick:t[4]||(t[4]=function(e){return c.logout()})}," Выйти ")]))})),we={name:"home",data:function(){return{statusU:!0,buttonUpload:"Загрузить аудио файл формата .ogg, .opus",textEx:"",typeText:"",sumText:"",ex:!0}},watch:{auth:function(e){!e&&this.ex&&(_e.push("/"),this.$toast.error("К сожалению, вы еще не вошли в аккаунт."))}},computed:{auth:function(){return this.$store.getters.get_auth},name:function(){return this.$store.getters.get_name},code:function(){return this.$store.getters.get_code}},methods:{submitFile:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.statusU=!1,r=document.getElementById("up").files[0],e.buttonUpload="Распознавание текста",t.next=5,q.textGet(r);case 5:n=t.sent,a=setInterval(Object($["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q.status(n);case 2:r=t.sent,1==r.status&&(e.buttonUpload="Подготовка конспекта о тексте",e.textEx=r.text),2==r.status&&(e.textEx=r.text,e.typeText=r.classi),3==r.status&&(e.buttonUpload="Готово",setTimeout((function(){e.textEx=r.text,e.typeText=r.classi,e.sumText=r.summary,e.buttonUpload="Загрузить аудио файл формата .ogg, .opus",e.statusU=!0}),500),clearInterval(a)),4==r.status&&(e.textEx=r.message,e.buttonUpload="Загрузить аудио файл формата .ogg",e.statusU=!0,clearInterval(a));case 7:case"end":return t.stop()}}),t)}))),5e3);case 7:case"end":return t.stop()}}),t)})))()},sendText:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},logout:function(){this.ex=!1,this.$store.commit("change_auth",!1),q.logout(),this.$toast.success("Поздравляем,вы успешно покинули аккаунт"),_e.push("/")}}};we.render=xe,we.__scopeId="data-v-67143cac";var Ne=we,Ve=[{path:"/",name:"Login",component:C},{path:"/home",name:"home",props:!0,component:Ne},{path:"/signup",name:"signup",component:pe}],ye=Object(b["a"])({history:Object(b["b"])(),routes:Ve}),_e=ye,Te=r("5502"),Re=Object(Te["a"])({state:{auth:!1,name:"",code:""},getters:{get_auth:function(e){return e.auth},get_name:function(e){return e.name},get_code:function(e){return e.code}},mutations:{change_auth:function(e,t){e.auth=t},change_name:function(e,t){e.name=t},change_code:function(e,t){e.code=t}},actions:{}});console.log(Re._mutations.change_auth[0]),console.log(Re.state.auth),setTimeout((function(){console.log(Re.state.auth)}),1e3);var $e=Re,Ue=r("d39c"),Ie=r.n(Ue),Se=(r("5aea"),r("af56"));Object(n["createApp"])(i).use(Ie.a).use(_e).use(Se["a"]).use($e).use(h.a,d.a).mount("#app")},"5aea":function(e,t,r){},"8bf5":function(e,t,r){},b640:function(e,t,r){e.exports=r.p+"img/logo.ee736822.jpg"},ebac:function(e,t,r){"use strict";r("1d50")}});
//# sourceMappingURL=app.04dd356e.js.map